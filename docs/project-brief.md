# Project Brief: Obsidian "Little Bot" Plugin

## Executive Summary

"Little Bot" 是一个为 Obsidian 设计的智能命令与写作助手插件。它旨在通过解析自然语言指令来简化工作流程，并能在一个混合AI模型下运行：利用本地模型提供即时、个性化的自动完成建议，同时调用云端大型语言模型（LLM）执行如内容摘要和扩写等高级任务。此外，该插件还能作为其他插件（如Dataview）的编排器，将复杂的操作转化为简单的自然语言指令，从而显著降低了Obsidian高级功能的学习曲线。

## Problem Statement

Obsidian 的强大在于其可扩展性，但像 Templater 或 Dataview 这样的高级插件通常需要用户学习特定的编程语法或脚本知识，这为非技术用户或希望快速工作的用户设置了障碍。目前，Obsidian 生态系统中缺少一个能够通过自然语言对话来理解用户意图、交互式地收集信息并执行复杂操作的智能层。这种缺失导致了效率差距，用户需要在大脑中“翻译”他们的想法成为机器可以理解的命令或脚本。

## Proposed Solution

我们将开发一个名为 "Little Bot" 的新插件，它将作为用户的智能伙伴，提供以下核心解决方案：

- **自然语言指令处理**: 用户可以直接用自然语言输入命令，如“总结这篇笔记”或“搜索所有带#todo标签的笔记”。
- **交互式参数补全**: 如果指令缺少必要信息（例如，用户说“打开笔记”但未指定名称），Bot将主动提问以获取所需参数。
- **个性化自动完成**: 一个在本地运行的、由用户自己的笔记内容训练的AI模型，将在写作时提供高度相关的自动完成建议。
- **混合AI能力**: 集成对外部大型语言模型（LLM）的调用能力，用于处理摘要、扩写、翻译等复杂任务，弥补本地模型的不足。
- **插件编排**: 作为其他插件的自然语言前端，例如，将“列出我最近5条收件箱中的笔记”这样的指令转化为一个功能性的Dataview查询代码块。

## Target Users

- **主要用户群**: 希望将工作流自动化但不想深入研究脚本的Obsidian进阶用户。
- **次要用户群**: 被现有高级插件的复杂性所劝退，但希望提升生产力的非技术背景用户。

## Goals & Success Metrics

- **业务目标**: 在发布后的前六个月内，在Obsidian社区插件商店达到50,000次下载。
- **用户成功指标**: 实现高用户留存率，前30天用户留存率达到40%。
- **关键绩效指标 (KPIs)**:
  - **日活跃用户 (DAU)**。
  - **每个会话的平均指令执行次数**。
  - **自动完成功能的接受率**。

## MVP Scope

为了以最快的速度验证核心概念，首个版本（MVP）将严格限制范围：

- **核心功能 (Must Have)**:
  - **指令处理**: 仅支持三个基础意图：`打开笔记`、`搜索笔记`、`插入日期`。
  - **实体识别**: 使用基于关键词和正则表达式的简单方法来识别参数。
  - **交互式提问**: 仅支持基于文本的参数补全提问。
- **范围之外 (Out of Scope for MVP)**:
  - **智能自动完成功能**。
  - **远程LLM调用功能**。
  - **插件编排功能 (Dataview等)**。
  - 用户自定义新指令的任何图形界面。

## Post-MVP Vision

在MVP成功验证核心工作流后，产品路线图将包括：

1.  **引入智能自动完成**: 实现并优化基于用户笔记训练的本地化AI自动完成功能。
2.  **集成远程LLM**: 增加对外部LLM的调用能力，并为用户提供API密钥管理界面。
3.  **实现插件编排**: 首先支持Dataview，然后逐步扩展到其他流行的插件。
4.  **支持复杂命令链**: 允许用户创建和执行由多个步骤组成的复杂工作流。
5.  **用户自定义界面**: 提供一个无需编码的界面，让用户可以轻松定义自己的指令和操作。

## Technical Considerations

- 该插件将完全在Obsidian的插件生态系统内开发。
- 需要研究或开发一个能够满足性能要求的轻量级本地NLP模型。
- 需要设计一个安全的机制来处理和存储用于调用远程LLM的API密钥。

## Constraints & Assumptions

- **限制**: 插件的性能必须不能显著影响Obsidian的启动速度和运行流畅度。
- **假设**:
  - 我们能够找到或构建一个在本地运行且足够准确地识别基本意图和实体的NLP解决方案。
  - Obsidian的插件API足够开放，可以支持我们设想的所有操作（如打开搜索、与其他插件交互等）。

## Risks & Open Questions

- **性能**: 在后台持续运行NLP模型以进行自动完成或指令监听，会对Obsidian的性能产生多大影响？
- **NLP准确性**: 对于多样化的自然语言输入，意图和实体识别的准确性能否达到用户的期望？
- **API成本与密钥管理**: 用户将如何管理调用外部LLM可能产生的费用和API密钥的安全性？
- **插件兼容性**: 当我们依赖的插件（如Dataview）更新时，我们如何维护兼容性？
- **数据隐私**: 当用户选择使用远程LLM功能时，笔记内容被发送到外部API，这带来了隐私方面的顾虑，需要明确告知并提供选项。
